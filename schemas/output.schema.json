{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "RepoCopilotOutput",
  "type": "object",
  "required": ["summary", "high_risk_areas", "confidence"],
  "additionalProperties": false,
  "properties": {
    "summary": { "type": "string", "minLength": 1 },
    "confidence": { "type": "string", "enum": ["low", "medium", "high"] },
    "high_risk_areas": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["area", "risk", "files", "recommendation"],
        "additionalProperties": false,
        "properties": {
          "area": { "type": "string", "minLength": 1 },
          "risk": { "type": "string", "minLength": 1 },
          "recommendation": { "type": "string", "minLength": 1 },
          "files": {
            "type": "array",
            "minItems": 1,
            "items": {
              "type": "object",
              "required": ["path", "lines"],
              "additionalProperties": false,
              "properties": {
                "path": { "type": "string", "minLength": 1 },
                "lines": { "type": "string", "pattern": "^[0-9]+-[0-9]+$" }
              }
            }
          }
        }
      }
    }
  }
}
